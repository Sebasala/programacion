---
import { BASE_URL } from "../../consts.js";
import { blogKeyword, blogPath, description, subtitle } from "./consts";
import { getCollection } from "astro:content";
import BaseLayout from "src/layouts/BaseLayout.astro";
import FormattedDate from "@components/FormattedDate.astro";
import Hero from "@components/Hero.astro";

const devPosts = (await getCollection("programacion")).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf(),
);
---

<BaseLayout
	blogPath={blogPath}
	description={description}
	headerText={blogKeyword}
	title={`${blogKeyword}: ${subtitle}`}
>
	<main>
		<Hero title={blogKeyword} subtitle={subtitle} />
		<section>
			<h2>Últimos artículos sobre desarrollo de software</h2>
			<ul>
				{
					devPosts.map((post) => (
						<li>
							<a href={`${BASE_URL}${blogPath}/${post.slug}/`}>
								<div class="overlay" />
								{/* TODO: Add alt text */}
								<img
									width={720}
									height={360}
									src={`${BASE_URL}${post.data.heroImage}`}
									alt=""
								/>
								<div class="item-text">
									<div class="item-heading">
										<p class="date">
											<FormattedDate date={post.data.pubDate} />
										</p>
										<h2 class="title">{post.data.title}</h2>
									</div>
									<p class="description">{post.data.description}</p>
								</div>
							</a>
						</li>
					))
				}
			</ul>
		</section>
		<section>
			<h2>Tu destino definitivo para Aprender y Dominar la Programación</h2>
			<p>
				Bienvenido a desarrollo de software, donde exploramos el apasionante
				mundo de la programación y el desarrollo de software. Aquí encontrarás
				una amplia variedad de recursos, desde tutoriales paso a paso hasta
				artículos informativos y noticias frescas sobre las últimas tendencias
				en tecnología. Únete a nuestra comunidad de apasionados por la
				programación y descubre consejos prácticos, trucos y estrategias para
				perfeccionar tus habilidades y alcanzar tus metas en el emocionante
				campo del desarrollo de software. ¡Acompáñanos en este viaje de
				aprendizaje y crecimiento!
			</p>
		</section>
	</main>
</BaseLayout>
<style>
	a {
		position: relative;
	}

	p {
		transition: color 0.3s;
	}
	img {
		max-height: calc(15 * var(--base-line-height));
	}
	.item-text {
		margin: calc(-9 * var(--base-line-height)) 0 0;
	}
	.item-heading {
		position: relative;
		padding: calc(4 * var(--base-line-height)) var(--base-line-height) 0;
		background-image: linear-gradient(
			to top,
			var(--light-background) 0%,
			transparent 100%
		);
	}
	.title {
		margin: 0;
		padding-bottom: var(--base-line-height);
	}
	.description {
		position: relative;
		background-color: var(--light-background);
		border-top: 1px solid var(--light-background);
		top: -1px;
		padding: 0 var(--base-line-height) var(--base-line-height);
	}
	ul {
		padding: 0;
		margin-left: calc(-1 * var(--base-line-height));
		width: calc(100% + 2 * var(--base-line-height));
	}
	li {
		list-style: none;
	}
	.date {
		margin: 0;
	}
	.description {
		margin: 0;
	}

	@property --item-text-background {
		syntax: "<color>";
		inherits: false;
		initial-value: transparent;
	}
	@media (hover: hover) {
		a {
			display: block;
			height: 450px;
			overflow: hidden;
			transition: color 0.3s;
			border-radius: 10%;

			&:hover {
				color: var(--link-hover-color-2);

				p {
					color: var(--link-hover-color-2);
				}
				.item-text {
					bottom: 0;
				}

				.item-heading {
					--item-text-background: var(--button-hover-background);
				}

				.description {
					background-color: var(--button-hover-background);
					border-top: 1px solid var(--button-hover-background);
				}

				.overlay {
					opacity: 1;
				}
			}
		}

		.overlay {
			background-color: var(--button-hover-background);
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			mix-blend-mode: multiply;
			opacity: 0;
			transition: opacity 0.3s;
		}
		.item-text {
			position: absolute;
			bottom: calc(-5 * var(--base-line-height));
			left: 0;
			right: 0;
			transition: bottom 0.3s;
		}

		.item-heading {
			--item-text-background: var(--light-background);
			background-image: linear-gradient(
				to top,
				var(--item-text-background) 0%,
				transparent 100%
			);
			transition: --item-text-background 0.3s;
		}

		.description {
			transition:
				background-color 0.3s,
				border-top 0.3s,
				color 0.3s;
		}
	}
</style>
