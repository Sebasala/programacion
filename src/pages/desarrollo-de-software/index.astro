---
import { BASE_URL } from '../../consts.js';
import { getCollection } from 'astro:content';
import FormattedDate from '@components/FormattedDate.astro';
import Hero from '@components/Hero.astro';
import BaseLayout from 'src/layouts/BaseLayout.astro';
import { 
	blogKeyword,
	blogPath,
	description,
	subtitle,
} from './consts';

const devPosts = (await getCollection('programacion')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
---

<BaseLayout title={`${blogKeyword}: ${subtitle}`} description={description} blogPath={blogPath} headerText={blogKeyword}>
	<main>
		<Hero title={blogKeyword} subtitle={subtitle} />
		<section>
			<h2>Últimos artículos sobre desarrollo de software</h2>
			<ul>
				{
					devPosts.map((post) => (
						<li>
							<a href={`${BASE_URL}${blogPath}/${post.slug}/`}>
								<div class="overlay"></div>
								<img width={720} height={360} src={`${BASE_URL}${post.data.heroImage}`} alt="" />
								<div class="item-text">
									<div class="item-heading">
										<p class="date">
											<FormattedDate date={post.data.pubDate} />
										</p>
										<h2 class="title">{post.data.title}</h2>
									</div>
									<p class="description">
										{post.data.description}
									</p>
								</div>
							</a>
						</li>
					))
				}
			</ul>
		</section>
		<section>
			<h2>Tu destino definitivo para Aprender y Dominar la Programación</h2>
			<p>Bienvenido a desarrollo de software, donde exploramos el apasionante mundo de la programación y el desarrollo de software. Aquí encontrarás una amplia variedad de recursos, desde tutoriales paso a paso hasta artículos informativos y noticias frescas sobre las últimas tendencias en tecnología. Únete a nuestra comunidad de apasionados por la programación y descubre consejos prácticos, trucos y estrategias para perfeccionar tus habilidades y alcanzar tus metas en el emocionante campo del desarrollo de software. ¡Acompáñanos en este viaje de aprendizaje y crecimiento!</p>
		</section>
	</main>
</BaseLayout>
<style>
	@property --item-text-background {
		syntax: "<color>";
		inherits: false;
		initial-value: transparent;
	}
	a {
		position: relative;
		height: 500px;
		display: block;
		border-radius: 10%;
		overflow: hidden;

		&:hover {
			color: var(--link-hover-color-2);

			p {
				color: var(--link-hover-color-2);
				opacity: var(--low-contrast);
			}
			.overlay {
				top: 0;
				mix-blend-mode: multiply;
			}

			.item-text {
				bottom: 0;
				--item-text-background: var(--button-hover-background);
			}
		}
	}

	p {
		transition: color 0.3s;
	}
	img {
		max-height: calc(15 * var(--base-line-height));
	}

	.overlay {
		background-color: var(--button-hover-background);
		width: 100%;
		height: 100%;
		opacity: 1;
		position: absolute;
		top: 100%;
		transition: top 0.3s;
		border-radius: 10%;
	}
	.item-text {
		--item-text-background: var(--light-background);
		position: absolute;
		bottom: calc(-5 * var(--base-line-height));
		margin: calc(-12 * var(--base-line-height)) 0 0;
		transition: --item-text-background 0.3s, bottom 0.3s;
		border-radius: 10%;
		padding: var(--base-line-height);
		background-image: linear-gradient(0deg, var(--item-text-background), transparent);
	}
	.item-heading {
		padding: calc(7 * var(--base-line-height)) 0 0;
	}
	.title {
		margin: 0;
		padding-bottom: var(--base-line-height);
	}
	.description {
		position: relative;
	}
	ul {
		padding: 0;
		margin-left: calc(-1 * var(--base-line-height));
		width: calc(100% + 2 * var(--base-line-height));
	}
	li {
		list-style: none;
	}
	.date {
		margin: 0;
	}
	.description {
		margin: 0;
	}
</style>
